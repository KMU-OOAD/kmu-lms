{% extends 'base.html' %}
{% block title %}í™ˆ | KMU ë„ì„œê´€ ì‹œìŠ¤í…œ{% endblock %}
{% block content %}
<h2>ğŸ« ë„ì„œê´€ ì•ˆë‚´</h2>

<!-- ë„ì„œ ì„œë¹„ìŠ¤ ì„¹ì…˜ ì¶”ê°€ -->
<div class="row mb-4">
  <div class="col-md-12">
    <div class="card">
      <div class="card-header bg-info text-white">ğŸ“š ë„ì„œ ì„œë¹„ìŠ¤</div>
      <div class="card-body">
        <a href="{% url 'library:search_books' %}" class="btn btn-primary me-2">ë„ì„œ ê²€ìƒ‰í•˜ê¸°</a>
        {% if user.is_authenticated %}
          <a href="{% url 'library:loan_history' %}" class="btn btn-secondary me-2">ë‚˜ì˜ ëŒ€ì¶œ ì´ë ¥</a>
          <a href="{% url 'library:my_reservations' %}" class="btn btn-info">ë‚˜ì˜ ì˜ˆì•½ ëª©ë¡</a>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<div class="row">
  <!-- ê³µì§€ì‚¬í•­ ì„¹ì…˜ -->
  <div class="col-md-6">
    <div class="card mb-4">
      <div class="card-header bg-primary text-white">ğŸ“¢ ìµœì‹  ê³µì§€ì‚¬í•­</div>
      <ul class="list-group list-group-flush">
        {% for notice in notices %}
          <li class="list-group-item">
            <strong>{{ notice.title }}</strong><br>
            <small class="text-muted">{{ notice.posted_date|date:"Y-m-d H:i" }}</small>
          </li>
        {% empty %}
          <li class="list-group-item">ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.</li>
        {% endfor %}
      </ul>
      <div class="card-footer text-end">
        <a href="{% url 'notice_list' %}" class="btn btn-sm btn-outline-primary">ì „ì²´ ë³´ê¸°</a>
      </div>
    </div>
  </div>

  <!-- ìš´ì˜ì‹œê°„ ì„¹ì…˜ -->
  <div class="col-md-6">
    <div class="card mb-4">
      <div class="card-header bg-success text-white">ğŸ• ì˜¤ëŠ˜ì˜ ìš´ì˜ì‹œê°„</div>
      <div class="card-body">
        {% if today_info %}
          <p><strong>{{ today_info.get_day_display }}</strong></p>
          <p>ê°œê´€: {{ today_info.open_time|time:"H:i" }}<br>
             íê´€: {{ today_info.close_time|time:"H:i" }}</p>
        {% else %}
          <p>ìš´ì˜ì‹œê°„ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endif %}
      </div>
      <div class="card-footer text-end">
        <a href="{% url 'library_info_list' %}" class="btn btn-sm btn-outline-success">ì „ì²´ ë³´ê¸°</a>
      </div>
    </div>
  </div>
</div>

<!-- ì¸ê¸° ë„ì„œ ë¯¸ë¦¬ë³´ê¸° -->
<div class="card mb-4">
  <div class="card-header bg-warning text-dark">ğŸ”¥ ì¸ê¸° ë„ì„œ Top 3</div>
  <ul class="list-group list-group-flush">
    {% for book in popular_books %}
      <li class="list-group-item">
        <strong>{{ book.title }}</strong> - {{ book.author }}<br>
        <small class="text-muted">ëŒ€ì¶œ {{ book.loan_count }}íšŒ</small>
      </li>
    {% empty %}
      <li class="list-group-item">ëŒ€ì¶œëœ ë„ì„œê°€ ì—†ìŠµë‹ˆë‹¤.</li>
    {% endfor %}
  </ul>
  <div class="card-footer text-end">
    <a href="{% url 'library:popular_books' %}" class="btn btn-sm btn-outline-warning">ì „ì²´ ë³´ê¸°</a>
  </div>
</div>

{% endblock %}
